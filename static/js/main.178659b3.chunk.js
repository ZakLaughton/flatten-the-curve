(this["webpackJsonpflatten-the-curve"]=this["webpackJsonpflatten-the-curve"]||[]).push([[0],{45:function(t,e,n){t.exports=n(75)},50:function(t,e,n){},74:function(t,e,n){},75:function(t,e,n){"use strict";n.r(e);var o=n(1),i=n.n(o),r=n(36),a=n.n(r),c=(n(50),n(14)),u=n(42),l=n(7),d=n(16),f=n(41);var s=function(t){var e=t.size,n=t.position,o=t.personData,r=t.dispatch,a=t.day,c=o.id,u=o.infectedDay,l=o.isCured,d=!l&&u>=0&&a-u>=5,s={height:"".concat(e,"px"),width:"".concat(e,"px"),backgroundColor:l?"#57c1ff":d?"#448844":"white",borderRadius:"50%",position:"absolute",left:"".concat(n[0],"px"),bottom:"".concat(n[1],"px"),border:"1px solid black",boxSizing:"border-box"},p={height:"".concat(e,"px"),width:"".concat(e,"px"),position:"absolute",left:"".concat(n[0],"px"),bottom:"".concat(n[1],"px"),border:"3px dashed #595959",boxSizing:"border-box"},y={height:"".concat(e,"px"),width:"".concat(e,"px"),position:"absolute",left:"".concat(n[0],"px"),bottom:"".concat(n[1],"px"),border:"3px solid black",boxSizing:"border-box"};return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a.span,{positionTransition:{duration:.4},style:s,onClick:function(){r({type:"UPDATE_PERSON_MOBILITY",payload:{id:c,mobility:d?"QUARANTINED":"SOCIALLY_DISTANCED"}}),r({type:"INCREMENT_DAY"})}}),"SOCIALLY_DISTANCED"===o.mobility&&i.a.createElement("div",{style:p}),"QUARANTINED"===o.mobility&&i.a.createElement("div",{style:y}))};function p(){var t=Object(c.a)(["\n  width: ",";\n  height: ",";\n  background-color: #b7b7b7;\n  position: relative;\n  margin: auto;\n"]);return p=function(){return t},t}var y=d.a.div(p(),(function(t){return"".concat(t.size,"px")}),(function(t){return"".concat(t.size,"px")})),m=function(t){var e=t.boardSize,n=t.cellSize,o=t.people,r=t.dispatch,a=t.day;return i.a.createElement(y,{size:e,onContextMenu:function(t){t.preventDefault(),r({type:"INCREMENT_DAY"})}},o.map((function(t,e){return i.a.createElement(s,{personData:t,key:e,size:n,position:[t.location.x*n,t.location.y*n],dispatch:r,day:a})})))},b=n(5),h=function(t){var e=t.historicalInfectedCount,n=t.totalPeopleCount,o=t.day,r=e.map((function(t){return{x:t.day,y:t.count}})),a=[0,n],c=[0,o],u=function(){for(var t=[0],e=0;e<o;e++)e%5===0&&t.push(e);return t}(),l=function(){for(var t=[],e=0,o=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1];e<o.length;e++){var i=o[e];t.push(i*n)}return t}();return i.a.createElement(b.e,{animation:!0,stackBy:"y",height:400,width:400,yDomain:a,xDomain:c,curve:"curveCardinal"},i.a.createElement(b.c,null),i.a.createElement(b.b,null),i.a.createElement(b.d,{animation:!0,attr:"x",attrAxis:"y",orientation:"bottom",tickValues:u,tickFormat:function(t){return t},title:"days",position:"end"}),i.a.createElement(b.f,{title:"% infected",position:"end",animation:!0,attr:"y",attrAxis:"x",orientation:"left",tickValues:l,tickFormat:function(t){return t/n*100}}),i.a.createElement(b.a,{animation:!0,data:r,opacity:.5,style:{},color:"red"}))};function x(t){return t.filter((function(t){return!t.isCured&&t.infectedDay>=0})).length}var E=n(17);function v(t,e){var n=e.type,o=e.payload;switch(n){case"INCREMENT_DAY":var i=t.day+1;t.people.reduce((function(e,n,o){if(["SOCIALLY_DISTANCED","QUARANTINED"].includes(n.mobility))return e;var i=function(t,e){var n=D(t,e);return n[Math.floor(Math.random()*n.length)].coordinates}(n.location,t.gridSize);return e.some((function(t){return t.location.x===i.x&&t.location.y===i.y}))?e[o]=n:e[o]=Object(l.a)({},n,{location:i}),e}),t.people);var r=function(){var e=Object(E.a)(t.people),n=e.filter((function(e){return-1!==e.infectedDay&&!e.isCured&&t.day-e.infectedDay>19})).map((function(t){return t.id}));e=e.map((function(t){return n.includes(t.id)&&(t.isCured=!0),t}));var o=t.people.filter((function(t){return t.infectedDay>=0&&!t.isCured&&"QUARANTINED"!==t.mobility})).map((function(t){return D(t.location).filter((function(t){return["N","E","S","W"].includes(t.direction)})).map((function(t){return t.coordinates}))}));return o=o.flat(),t.people.map((function(e){if(-1===e.infectedDay&&o.some((function(t){return e.location.x===t.x&&e.location.y===t.y}))){var n="SOCIALLY_DISTANCED"===e.mobility?.5:1;Math.random()<=n&&(e.infectedDay=t.day)}return e}))}();return Object(l.a)({},t,{day:i,people:r,historicalInfectedCount:[].concat(Object(E.a)(t.historicalInfectedCount),[{day:i,count:x(r)}])});case"UPDATE_PERSON_MOBILITY":var a=Object(E.a)(t.people),c=a.findIndex((function(t){return t.id===o.id}));return a[c].mobility=o.mobility,Object(l.a)({},t,{people:a});default:return t}}function D(t,e){var n=t.x,o=t.y,i=[{direction:"N",coordinates:{x:n+0,y:o+1}},{direction:"NE",coordinates:{x:n+1,y:o+1}},{direction:"E",coordinates:{x:n+1,y:o+0}},{direction:"SE",coordinates:{x:n+1,y:o-1}},{direction:"S",coordinates:{x:n+0,y:o-1}},{direction:"SW",coordinates:{x:n-1,y:o-1}},{direction:"W",coordinates:{x:n-1,y:o+0}},{direction:"NW",coordinates:{x:n-1,y:o+1}}];return function(t){return 0===t.x}(t)&&(i=i.filter((function(t){return!["NW","W","SW"].includes(t.direction)}))),function(t){return 0===t.y}(t)&&(i=i.filter((function(t){return!["SW","S","SE"].includes(t.direction)}))),function(t){return t.x===e-1}(t)&&(i=i.filter((function(t){return!["SE","E","NE"].includes(t.direction)}))),function(t){return t.y===e-1}(t)&&(i=i.filter((function(t){return!["NE","N","NW"].includes(t.direction)}))),i}n(74);function S(){var t=Object(c.a)(["\n  background-color: #454545;\n  color: rgba(255, 255, 255, 0.8);\n"]);return S=function(){return t},t}var g=d.a.main(S()),C=function(){var t=Object(o.useReducer)(v,{day:0,people:[],historicalInfectedCount:[{day:0,count:0}],gridSize:25,boardSize:700,peopleDensity:.3},(function(t){var e=t.gridSize,n=t.peopleDensity,o=Math.floor(e*e*n)||4,i=function(t){for(var e,n,o=t.length;o;e=parseInt(Math.random()*o),n=t[--o],t[o]=t[e],t[e]=n);return t}(function(){for(var t=[],n=0;n<e;n++)for(var o=0;o<e;o++)t.push({x:n,y:o});return t}()).slice(0,o).map((function(t,e){return{id:e,location:t,infectedDay:-1,isCured:!1,mobility:"FREE"}}));return i[Math.floor(Math.random()*i.length)].infectedDay=0,Object(l.a)({},t,{people:i})})),e=Object(u.a)(t,2),n=e[0],r=e[1],a=n.day,c=n.people,d=n.historicalInfectedCount,f=n.gridSize,s=n.boardSize,p=s/f,y={gridSize:f,boardSize:s,peopleDensity:n.peopleDensity},b=x(c),E=c.filter((function(t){return t.isCured})).length,D=c.length||100;return i.a.createElement(g,null,i.a.createElement(m,Object.assign({},y,{dispatch:r,people:c,day:a,cellSize:p})),i.a.createElement("p",null,"Infected: ",b),i.a.createElement("p",null,"Recovered: ",E),i.a.createElement(h,{day:a,historicalInfectedCount:d,totalPeopleCount:D}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.178659b3.chunk.js.map