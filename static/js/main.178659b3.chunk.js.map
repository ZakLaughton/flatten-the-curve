{"version":3,"sources":["components/Person.js","components/GameBoard.js","components/Graph.js","utils/utils.js","state/gameReducer.js","App.js","serviceWorker.js","index.js"],"names":["Person","size","position","personData","dispatch","day","id","infectedDay","isCured","isSymptomatic","personStyle","height","width","backgroundColor","borderRadius","left","bottom","border","boxSizing","sociallyDistancedSquareStyle","quarantinedSquareStyle","span","positionTransition","duration","style","onClick","type","payload","mobility","Board","styled","div","props","GameBoard","boardSize","cellSize","people","onContextMenu","e","preventDefault","map","person","index","key","location","x","y","Graph","historicalInfectedCount","totalPeopleCount","infectedGraphData","count","yDomain","xDomain","xTickValues","tickArray","i","push","setXTickValues","yTickValues","percentage","setYTickValues","animation","stackBy","curve","attr","attrAxis","orientation","tickValues","tickFormat","n","title","data","opacity","color","getInfectedPeopleCount","filter","length","reducer","state","newDayNumber","reduce","newPeople","includes","newLocation","gridSize","possibleMoves","getSurroundingCells","Math","floor","random","coordinates","calculateMove","some","movedInfectedPeople","peopleCopy","peopleToRecover","infectionZones","direction","surroundingCell","flat","infectionZone","chanceOfGettingInfected","infect","personIndex","findIndex","surroundingCells","isOnLeftEdge","move","isOnBottomEdge","isOnRightEdge","isOnTopEdge","GameGrid","main","App","useReducer","peopleDensity","initialState","numberOfPeople","initialPeople","arrayToShuffle","j","parseInt","shuffleArray","positionList","generateAllPositions","slice","gameMetrics","infectedPeopleCount","curedPeopleCount","Boolean","window","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"sSA4DeA,MAzDf,YAAgE,IAA9CC,EAA6C,EAA7CA,KAAMC,EAAuC,EAAvCA,SAAUC,EAA6B,EAA7BA,WAAYC,EAAiB,EAAjBA,SAAUC,EAAO,EAAPA,IAC9CC,EAA6BH,EAA7BG,GAAIC,EAAyBJ,EAAzBI,YAAaC,EAAYL,EAAZK,QACnBC,GAAiBD,GAAWD,GAAe,GAAKF,EAAME,GAAe,EASrEG,EAAc,CAClBC,OAAO,GAAD,OAAKV,EAAL,MACNW,MAAM,GAAD,OAAKX,EAAL,MACLY,gBAAiBL,EAAU,UAAYC,EAAgB,UAAY,QACnEK,aAAa,MACbZ,SAAS,WACTa,KAAK,GAAD,OAAKb,EAAS,GAAd,MACJc,OAAO,GAAD,OAAKd,EAAS,GAAd,MACNe,OAAQ,kBAGRC,UAAU,cAGNC,EAA+B,CACnCR,OAAO,GAAD,OAAKV,EAAL,MACNW,MAAM,GAAD,OAAKX,EAAL,MACLC,SAAS,WACTa,KAAK,GAAD,OAAKb,EAAS,GAAd,MACJc,OAAO,GAAD,OAAKd,EAAS,GAAd,MACNe,OAAO,qBACPC,UAAU,cAGNE,EAAyB,CAC7BT,OAAO,GAAD,OAAKV,EAAL,MACNW,MAAM,GAAD,OAAKX,EAAL,MACLC,SAAS,WACTa,KAAK,GAAD,OAAKb,EAAS,GAAd,MACJc,OAAO,GAAD,OAAKd,EAAS,GAAd,MACNe,OAAO,kBACPC,UAAU,cAEZ,OACE,oCACE,kBAAC,IAAOG,KAAR,CACEC,mBAAoB,CAAEC,SAAU,IAChCC,MAAOd,EACPe,QA9Cc,WAElBrB,EAAS,CAAEsB,KAAM,yBAA0BC,QAAS,CAAErB,KAAIsB,SADtCnB,EAAgB,cAAgB,wBAEpDL,EAAS,CAAEsB,KAAM,qBA6CU,uBAAxBvB,EAAWyB,UAAqC,yBAAKJ,MAAOL,IACpC,gBAAxBhB,EAAWyB,UAA8B,yBAAKJ,MAAOJ,M,4KC3B5D,IAAMS,EAAQC,IAAOC,IAAV,KACA,SAACC,GAAD,gBAAcA,EAAM/B,KAApB,SACC,SAAC+B,GAAD,gBAAcA,EAAM/B,KAApB,SAMGgC,EAhCf,YAAoE,IAA/CC,EAA8C,EAA9CA,UAAWC,EAAmC,EAAnCA,SAAUC,EAAyB,EAAzBA,OAAQhC,EAAiB,EAAjBA,SAAUC,EAAO,EAAPA,IAC1D,OACE,kBAACwB,EAAD,CACE5B,KAAMiC,EACNG,cAAe,SAACC,GACdA,EAAEC,iBAEFnC,EAAS,CAAEsB,KAAM,oBAGlBU,EAAOI,KAAI,SAACC,EAAQC,GAAT,OACV,kBAAC,EAAD,CACEvC,WAAYsC,EACZE,IAAKD,EACLzC,KAAMkC,EACNjC,SAAU,CAACuC,EAAOG,SAASC,EAAIV,EAAUM,EAAOG,SAASE,EAAIX,GAC7D/B,SAAUA,EACVC,IAAKA,S,OCoDA0C,EA/DM,SAAC,GAAwD,IAAtDC,EAAqD,EAArDA,wBAAyBC,EAA4B,EAA5BA,iBAAkB5C,EAAU,EAAVA,IAC3D6C,EAAoBF,EAAwBR,KAAI,YACpD,MAAO,CAAEK,EAD+D,EAAjBxC,IACtCyC,EADuD,EAAZK,UAGxDC,EAAU,CAAC,EAAGH,GACdI,EAAU,CAAC,EAAGhD,GAUdiD,EATiB,WAErB,IADA,IAAIC,EAAY,CAAC,GACRC,EAAI,EAAGA,EAAInD,EAAKmD,IACnBA,EAAI,IAAM,GACZD,EAAUE,KAAKD,GAGnB,OAAOD,EAEWG,GASdC,EARiB,WAGrB,IAFA,IACIJ,EAAY,GAChB,MAFwB,CAAC,EAAG,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAEzE,eAAwC,CAAnC,IAAIK,EAAU,KACjBL,EAAUE,KAAKG,EAAaX,GAE9B,OAAOM,EAEWM,GAEpB,OACE,kBAAC,IAAD,CACEC,WAAS,EACTC,QAAQ,IACRpD,OAAQ,IACRC,MAAO,IACPwC,QAASA,EACTC,QAASA,EACTW,MAAM,iBAEN,kBAAC,IAAD,MACA,kBAAC,IAAD,MACA,kBAAC,IAAD,CACEF,WAAS,EACTG,KAAK,IACLC,SAAS,IACTC,YAAY,SACZC,WAAYd,EACZe,WAAY,SAACC,GAAD,OAAOA,GACnBC,MAAM,OACNrE,SAAS,QAEX,kBAAC,IAAD,CACEqE,MAAM,aACNrE,SAAS,MACT4D,WAAS,EACTG,KAAK,IACLC,SAAS,IACTC,YAAY,OACZC,WAAYT,EACZU,WAAY,SAACC,GAAD,OAAQA,EAAIrB,EAAoB,OAE9C,kBAAC,IAAD,CAAYa,WAAS,EAACU,KAAMtB,EAAmBuB,QAAS,GAAKjD,MAAO,GAAIkD,MAAM,UCxD7E,SAASC,EAAuBvC,GACrC,OAAOA,EAAOwC,QAAO,SAACnC,GAAD,OAAaA,EAAOjC,SAAWiC,EAAOlC,aAAe,KAAGsE,O,YCXhE,SAASC,EAAQC,EAAjB,GAA4C,IAAlBrD,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,QAC7C,OAAQD,GACN,IAAK,gBACH,IAAMsD,EAAeD,EAAM1E,IAAM,EAEb0E,EAAM3C,OAAO6C,QAAO,SAACC,EAAWzC,EAAQC,GAC1D,GAAI,CAAC,qBAAsB,eAAeyC,SAAS1C,EAAOb,UAAW,OAAOsD,EAC5E,IAAME,EA+Ed,SAAuBxC,EAAUyC,GAC/B,IAAMC,EAAgBC,EAAoB3C,EAAUyC,GAGpD,OAFoBC,EAAcE,KAAKC,MAAMD,KAAKE,SAAWJ,EAAcT,SAExDc,YAnFOC,CAAcnD,EAAOG,SAAUmC,EAAMM,UAYzD,OATEH,EAAUW,MACR,SAACpD,GAAD,OAAYA,EAAOG,SAASC,IAAMuC,EAAYvC,GAAKJ,EAAOG,SAASE,IAAMsC,EAAYtC,KAGvFoC,EAAUxC,GAASD,EAEnByC,EAAUxC,GAAV,eAAwBD,EAAxB,CAAgCG,SAAUwC,IAGrCF,IACNH,EAAM3C,QA4CT,IAAM0D,EAzCN,WACE,IAAIC,EAAU,YAAOhB,EAAM3C,QACrB4D,EAAkBD,EACrBnB,QACC,SAACnC,GAAD,OAC0B,IAAxBA,EAAOlC,cAAuBkC,EAAOjC,SAAWuE,EAAM1E,IAAMoC,EAAOlC,YAAc,MAEpFiC,KAAI,SAACC,GAAD,OAAYA,EAAOnC,MAC1ByF,EAAaA,EAAWvD,KAAI,SAACC,GAE3B,OADIuD,EAAgBb,SAAS1C,EAAOnC,MAAKmC,EAAOjC,SAAU,GACnDiC,KAGT,IAIIwD,EAJqBlB,EAAM3C,OAAOwC,QACpC,SAACnC,GAAD,OACEA,EAAOlC,aAAe,IAAMkC,EAAOjC,SAA+B,gBAApBiC,EAAOb,YAEnBY,KAAI,SAACC,GAKzC,OAJ0B8C,EAAoB9C,EAAOG,UAClDgC,QAAO,SAAChC,GAAD,MAAc,CAAC,IAAK,IAAK,IAAK,KAAKuC,SAASvC,EAASsD,cAC5D1D,KAAI,SAAC2D,GAAD,OAAqBA,EAAgBR,kBAmB9C,OAfAM,EAAiBA,EAAeG,OACJrB,EAAM3C,OAAOI,KAAI,SAACC,GAC5C,IAC0B,IAAxBA,EAAOlC,aACP0F,EAAeJ,MACb,SAACQ,GAAD,OACE5D,EAAOG,SAASC,IAAMwD,EAAcxD,GAAKJ,EAAOG,SAASE,IAAMuD,EAAcvD,KAEjF,CACA,IAAMwD,EAA8C,uBAApB7D,EAAOb,SAAoC,GAAM,EAC7E4D,KAAKE,UAAYY,IAAyB7D,EAAOlC,YAAcwE,EAAM1E,KAE3E,OAAOoC,KAKiB8D,GAC5B,OAAO,eACFxB,EADL,CAEE1E,IAAK2E,EACL5C,OAAQ0D,EACR9C,wBAAwB,GAAD,mBAClB+B,EAAM/B,yBADY,CAErB,CAAE3C,IAAK2E,EAAc7B,MAAOwB,EAAuBmB,QAIzD,IAAK,yBACH,IAAMZ,EAAS,YAAOH,EAAM3C,QACtBoE,EAActB,EAAUuB,WAAU,SAAChE,GAAD,OAAYA,EAAOnC,KAAOqB,EAAQrB,MAG1E,OAFA4E,EAAUsB,GAAa5E,SAAWD,EAAQC,SAEnC,eAAKmD,EAAZ,CAAmB3C,OAAQ8C,IAC7B,QACE,OAAOH,GAWb,SAASQ,EAAoB3C,EAAUyC,GAAW,IACxCxC,EAASD,EAATC,EAAGC,EAAMF,EAANE,EACP4D,EAAmB,CACrB,CAAER,UAAW,IAAKP,YAAa,CAAE9C,EAAGA,EAAI,EAAGC,EAAGA,EAAI,IAClD,CAAEoD,UAAW,KAAMP,YAAa,CAAE9C,EAAGA,EAAI,EAAGC,EAAGA,EAAI,IACnD,CAAEoD,UAAW,IAAKP,YAAa,CAAE9C,EAAGA,EAAI,EAAGC,EAAGA,EAAI,IAClD,CAAEoD,UAAW,KAAMP,YAAa,CAAE9C,EAAGA,EAAI,EAAGC,EAAGA,EAAI,IACnD,CAAEoD,UAAW,IAAKP,YAAa,CAAE9C,EAAGA,EAAI,EAAGC,EAAGA,EAAI,IAClD,CAAEoD,UAAW,KAAMP,YAAa,CAAE9C,EAAGA,EAAI,EAAGC,EAAGA,EAAI,IACnD,CAAEoD,UAAW,IAAKP,YAAa,CAAE9C,EAAGA,EAAI,EAAGC,EAAGA,EAAI,IAClD,CAAEoD,UAAW,KAAMP,YAAa,CAAE9C,EAAGA,EAAI,EAAGC,EAAGA,EAAI,KAoBrD,OAEA,SAAsBF,GACpB,OAAsB,IAAfA,EAASC,EApBd8D,CAAa/D,KACf8D,EAAmBA,EAAiB9B,QAClC,SAACgC,GAAD,OAAW,CAAC,KAAM,IAAK,MAAMzB,SAASyB,EAAKV,eAoB/C,SAAwBtD,GACtB,OAAsB,IAAfA,EAASE,EAnBd+D,CAAejE,KACjB8D,EAAmBA,EAAiB9B,QAClC,SAACgC,GAAD,OAAW,CAAC,KAAM,IAAK,MAAMzB,SAASyB,EAAKV,eAmB/C,SAAuBtD,GACrB,OAAOA,EAASC,IAAMwC,EAAW,EAlB/ByB,CAAclE,KAChB8D,EAAmBA,EAAiB9B,QAClC,SAACgC,GAAD,OAAW,CAAC,KAAM,IAAK,MAAMzB,SAASyB,EAAKV,eAkB/C,SAAqBtD,GACnB,OAAOA,EAASE,IAAMuC,EAAW,EAjB/B0B,CAAYnE,KACd8D,EAAmBA,EAAiB9B,QAClC,SAACgC,GAAD,OAAW,CAAC,KAAM,IAAK,MAAMzB,SAASyB,EAAKV,eAGxCQ,E,+IC3CT,IAAMM,EAAWlF,IAAOmF,KAAV,KAKCC,EA/Ef,WAAe,MA4CaC,qBAAWrC,EA3ChB,CACnBzE,IAAK,EACL+B,OAAQ,GACRY,wBAAyB,CAAC,CAAE3C,IAAK,EAAG8C,MAAO,IAC3CkC,SAAU,GACVnD,UAAW,IACXkF,cAAe,KAGjB,SAAcC,GAAe,IACnBhC,EAA4BgC,EAA5BhC,SAAU+B,EAAkBC,EAAlBD,cACZE,EAAiB9B,KAAKC,MAAMJ,EAAWA,EAAW+B,IAAkB,EA0BpEG,EF9CH,SAAsBC,GAC3B,IACE,IAAIC,EAAG5E,EAAGW,EAAIgE,EAAe3C,OAC7BrB,EACAiE,EAAIC,SAASlC,KAAKE,SAAWlC,GAC3BX,EAAI2E,IAAiBhE,GACrBgE,EAAehE,GAAKgE,EAAeC,GACnCD,EAAeC,GAAK5E,GAExB,OAAO2E,EEcqBG,CAa1B,WAEE,IADA,IAAIC,EAAe,GACV/E,EAAI,EAAGA,EAAIwC,EAAUxC,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIuC,EAAUvC,IAC5B8E,EAAanE,KAAK,CAAEZ,IAAGC,MAG3B,OAAO8E,EArBcC,IAEYC,MAAM,EAAGR,GAAgB9E,KAAI,SAACI,EAAUF,GACvE,MAAO,CACLpC,GAAIoC,EACJE,WACArC,aAAc,EACdC,SAAS,EACToB,SAAU,WAmBhB,OADA2F,EADsB/B,KAAKC,MAAMD,KAAKE,SAAW6B,EAAc1C,SAClCtE,YAAc,EACpC,eAAK8G,EAAZ,CAA0BjF,OAAQmF,OAzCvB,mBA4CNxC,EA5CM,KA4CC3E,EA5CD,KA6CLC,EAA6E0E,EAA7E1E,IAAK+B,EAAwE2C,EAAxE3C,OAAQY,EAAgE+B,EAAhE/B,wBAAyBqC,EAAuCN,EAAvCM,SAAUnD,EAA6B6C,EAA7B7C,UAElDC,EAAWD,EAAYmD,EACvB0C,EAAc,CAAE1C,WAAUnD,YAAWkF,cAH0CrC,EAAlBqC,eAK7DY,EAAsBrD,EAAuBvC,GAC7C6F,EAAmB7F,EAAOwC,QAAO,SAACnC,GAAD,OAAYA,EAAOjC,WAASqE,OAC7D5B,EAAmBb,EAAOyC,QAAU,IAE1C,OACE,kBAACmC,EAAD,KACE,kBAAC,EAAD,iBACMe,EADN,CAEE3H,SAAUA,EACVgC,OAAQA,EACR/B,IAAKA,EACL8B,SAAUA,KAEZ,wCAAc6F,GACd,yCAAeC,GACf,kBAAC,EAAD,CACE5H,IAAKA,EACL2C,wBAAyBA,EACzBC,iBAAkBA,MChENiF,QACW,cAA7BC,OAAOvF,SAASwF,UAEe,UAA7BD,OAAOvF,SAASwF,UAEhBD,OAAOvF,SAASwF,SAASC,MACvB,2DCLNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,SDkHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLC,QAAQD,MAAMA,EAAME,c","file":"static/js/main.178659b3.chunk.js","sourcesContent":["import React from 'react';\nimport { motion } from 'framer-motion';\n\nfunction Person({ size, position, personData, dispatch, day }) {\n  const { id, infectedDay, isCured } = personData;\n  const isSymptomatic = !isCured && infectedDay >= 0 && day - infectedDay >= 5;\n  const handleClick = () => {\n    const newMobility = isSymptomatic ? 'QUARANTINED' : 'SOCIALLY_DISTANCED';\n    dispatch({ type: 'UPDATE_PERSON_MOBILITY', payload: { id, mobility: newMobility } });\n    dispatch({ type: 'INCREMENT_DAY' });\n  };\n\n  // ! styled-components slow this movement to a crawl. Don't use them here\n\n  const personStyle = {\n    height: `${size}px`,\n    width: `${size}px`,\n    backgroundColor: isCured ? '#57c1ff' : isSymptomatic ? '#448844' : 'white',\n    borderRadius: `50%`,\n    position: `absolute`,\n    left: `${position[0]}px`,\n    bottom: `${position[1]}px`,\n    border: '1px solid black',\n    // Use to reveal all infected for debugging:\n    // border: infectedDay >= 0 ? '3px solid green' : '1px solid black',\n    boxSizing: `border-box`,\n  };\n\n  const sociallyDistancedSquareStyle = {\n    height: `${size}px`,\n    width: `${size}px`,\n    position: `absolute`,\n    left: `${position[0]}px`,\n    bottom: `${position[1]}px`,\n    border: `3px dashed #595959`,\n    boxSizing: `border-box`,\n  };\n\n  const quarantinedSquareStyle = {\n    height: `${size}px`,\n    width: `${size}px`,\n    position: `absolute`,\n    left: `${position[0]}px`,\n    bottom: `${position[1]}px`,\n    border: `3px solid black`,\n    boxSizing: `border-box`,\n  };\n  return (\n    <>\n      <motion.span\n        positionTransition={{ duration: 0.4 }}\n        style={personStyle}\n        onClick={handleClick}\n      />\n      {personData.mobility === 'SOCIALLY_DISTANCED' && <div style={sociallyDistancedSquareStyle} />}\n      {personData.mobility === 'QUARANTINED' && <div style={quarantinedSquareStyle} />}\n    </>\n  );\n}\n\nexport default Person;\n","import React from 'react';\nimport Person from './Person';\nimport styled from 'styled-components';\n\nfunction GameBoard({ boardSize, cellSize, people, dispatch, day }) {\n  return (\n    <Board\n      size={boardSize}\n      onContextMenu={(e) => {\n        e.preventDefault();\n        // setInterval(movePeople, 400);\n        dispatch({ type: 'INCREMENT_DAY' });\n      }}\n    >\n      {people.map((person, index) => (\n        <Person\n          personData={person}\n          key={index}\n          size={cellSize}\n          position={[person.location.x * cellSize, person.location.y * cellSize]}\n          dispatch={dispatch}\n          day={day}\n        />\n      ))}\n    </Board>\n  );\n}\n\nconst Board = styled.div`\n  width: ${(props) => `${props.size}px`};\n  height: ${(props) => `${props.size}px`};\n  background-color: #b7b7b7;\n  position: relative;\n  margin: auto;\n`;\n\nexport default GameBoard;\n","import React from 'react';\nimport {\n  XYPlot,\n  AreaSeries,\n  XAxis,\n  YAxis,\n  HorizontalGridLines,\n  VerticalGridLines,\n} from 'react-vis';\n\nexport const Graph = ({ historicalInfectedCount, totalPeopleCount, day }) => {\n  const infectedGraphData = historicalInfectedCount.map(({ day, count }) => {\n    return { x: day, y: count };\n  });\n  const yDomain = [0, totalPeopleCount];\n  const xDomain = [0, day];\n  const setXTickValues = () => {\n    let tickArray = [0];\n    for (let i = 0; i < day; i++) {\n      if (i % 5 === 0) {\n        tickArray.push(i);\n      }\n    }\n    return tickArray;\n  };\n  const xTickValues = setXTickValues();\n  const setYTickValues = () => {\n    const percentageArray = [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1];\n    let tickArray = [];\n    for (let percentage of percentageArray) {\n      tickArray.push(percentage * totalPeopleCount);\n    }\n    return tickArray;\n  };\n  const yTickValues = setYTickValues();\n\n  return (\n    <XYPlot\n      animation\n      stackBy='y'\n      height={400}\n      width={400}\n      yDomain={yDomain}\n      xDomain={xDomain}\n      curve='curveCardinal'\n    >\n      <VerticalGridLines />\n      <HorizontalGridLines />\n      <XAxis\n        animation\n        attr='x'\n        attrAxis='y'\n        orientation='bottom'\n        tickValues={xTickValues}\n        tickFormat={(n) => n}\n        title='days'\n        position='end'\n      />\n      <YAxis\n        title='% infected'\n        position='end'\n        animation\n        attr='y'\n        attrAxis='x'\n        orientation='left'\n        tickValues={yTickValues}\n        tickFormat={(n) => (n / totalPeopleCount) * 100}\n      />\n      <AreaSeries animation data={infectedGraphData} opacity={0.5} style={{}} color='red' />\n    </XYPlot>\n  );\n};\n\nexport default Graph;\n","export function shuffleArray(arrayToShuffle) {\n  for (\n    var j, x, i = arrayToShuffle.length;\n    i;\n    j = parseInt(Math.random() * i),\n      x = arrayToShuffle[--i],\n      arrayToShuffle[i] = arrayToShuffle[j],\n      arrayToShuffle[j] = x\n  );\n  return arrayToShuffle;\n}\n\nexport function getInfectedPeopleCount(people) {\n  return people.filter((person) => !person.isCured && person.infectedDay >= 0).length;\n}\n","import { getInfectedPeopleCount } from '../utils/utils';\n\nexport default function reducer(state, { type, payload }) {\n  switch (type) {\n    case 'INCREMENT_DAY':\n      const newDayNumber = state.day + 1;\n      // Move people\n      const movedPeople = state.people.reduce((newPeople, person, index) => {\n        if (['SOCIALLY_DISTANCED', 'QUARANTINED'].includes(person.mobility)) return newPeople;\n        const newLocation = calculateMove(person.location, state.gridSize);\n\n        if (\n          newPeople.some(\n            (person) => person.location.x === newLocation.x && person.location.y === newLocation.y\n          )\n        ) {\n          newPeople[index] = person;\n        } else {\n          newPeople[index] = { ...person, location: newLocation };\n        }\n\n        return newPeople;\n      }, state.people);\n\n      // Infect\n      function infect() {\n        let peopleCopy = [...state.people];\n        const peopleToRecover = peopleCopy\n          .filter(\n            (person) =>\n              person.infectedDay !== -1 && !person.isCured && state.day - person.infectedDay > 19\n          )\n          .map((person) => person.id);\n        peopleCopy = peopleCopy.map((person) => {\n          if (peopleToRecover.includes(person.id)) person.isCured = true;\n          return person;\n        });\n\n        const contagiousPeople = state.people.filter(\n          (person) =>\n            person.infectedDay >= 0 && !person.isCured && person.mobility !== 'QUARANTINED'\n        );\n        let infectionZones = contagiousPeople.map((person) => {\n          const neighborLocations = getSurroundingCells(person.location)\n            .filter((location) => ['N', 'E', 'S', 'W'].includes(location.direction))\n            .map((surroundingCell) => surroundingCell.coordinates);\n\n          return neighborLocations;\n        });\n        infectionZones = infectionZones.flat();\n        const newlyInfectedPeople = state.people.map((person) => {\n          if (\n            person.infectedDay === -1 &&\n            infectionZones.some(\n              (infectionZone) =>\n                person.location.x === infectionZone.x && person.location.y === infectionZone.y\n            )\n          ) {\n            const chanceOfGettingInfected = person.mobility === 'SOCIALLY_DISTANCED' ? 0.5 : 1;\n            if (Math.random() <= chanceOfGettingInfected) person.infectedDay = state.day;\n          }\n          return person;\n        });\n\n        return newlyInfectedPeople;\n      }\n      const movedInfectedPeople = infect(movedPeople);\n      return {\n        ...state,\n        day: newDayNumber,\n        people: movedInfectedPeople,\n        historicalInfectedCount: [\n          ...state.historicalInfectedCount,\n          { day: newDayNumber, count: getInfectedPeopleCount(movedInfectedPeople) },\n        ],\n      };\n\n    case 'UPDATE_PERSON_MOBILITY':\n      const newPeople = [...state.people];\n      const personIndex = newPeople.findIndex((person) => person.id === payload.id);\n      newPeople[personIndex].mobility = payload.mobility;\n\n      return { ...state, people: newPeople };\n    default:\n      return state;\n  }\n}\n\nfunction calculateMove(location, gridSize) {\n  const possibleMoves = getSurroundingCells(location, gridSize);\n  const newLocation = possibleMoves[Math.floor(Math.random() * possibleMoves.length)];\n\n  return newLocation.coordinates;\n}\n\nfunction getSurroundingCells(location, gridSize) {\n  const { x, y } = location;\n  let surroundingCells = [\n    { direction: 'N', coordinates: { x: x + 0, y: y + 1 } },\n    { direction: 'NE', coordinates: { x: x + 1, y: y + 1 } },\n    { direction: 'E', coordinates: { x: x + 1, y: y + 0 } },\n    { direction: 'SE', coordinates: { x: x + 1, y: y - 1 } },\n    { direction: 'S', coordinates: { x: x + 0, y: y - 1 } },\n    { direction: 'SW', coordinates: { x: x - 1, y: y - 1 } },\n    { direction: 'W', coordinates: { x: x - 1, y: y + 0 } },\n    { direction: 'NW', coordinates: { x: x - 1, y: y + 1 } },\n  ];\n\n  if (isOnLeftEdge(location))\n    surroundingCells = surroundingCells.filter(\n      (move) => !['NW', 'W', 'SW'].includes(move.direction)\n    );\n  if (isOnBottomEdge(location))\n    surroundingCells = surroundingCells.filter(\n      (move) => !['SW', 'S', 'SE'].includes(move.direction)\n    );\n  if (isOnRightEdge(location))\n    surroundingCells = surroundingCells.filter(\n      (move) => !['SE', 'E', 'NE'].includes(move.direction)\n    );\n  if (isOnTopEdge(location))\n    surroundingCells = surroundingCells.filter(\n      (move) => !['NE', 'N', 'NW'].includes(move.direction)\n    );\n\n  return surroundingCells;\n\n  function isOnLeftEdge(location) {\n    return location.x === 0;\n  }\n  function isOnBottomEdge(location) {\n    return location.y === 0;\n  }\n  function isOnRightEdge(location) {\n    return location.x === gridSize - 1;\n  }\n  function isOnTopEdge(location) {\n    return location.y === gridSize - 1;\n  }\n}\n","import React, { useReducer } from 'react';\nimport styled from 'styled-components';\nimport GameBoard from './components/GameBoard';\nimport Graph from './components/Graph';\nimport { shuffleArray, getInfectedPeopleCount } from './utils/utils';\nimport reducer from './state/gameReducer';\nimport './App.css';\n\nfunction App() {\n  const initialState = {\n    day: 0,\n    people: [],\n    historicalInfectedCount: [{ day: 0, count: 0 }],\n    gridSize: 25,\n    boardSize: 700,\n    peopleDensity: 0.3,\n  };\n\n  function init(initialState) {\n    const { gridSize, peopleDensity } = initialState;\n    const numberOfPeople = Math.floor(gridSize * gridSize * peopleDensity) || 4;\n    const generateInitialPeople = () => {\n      const allPositions = generateAllPositions();\n      let shuffledLocations = shuffleArray(allPositions);\n      const people = shuffledLocations.slice(0, numberOfPeople).map((location, index) => {\n        return {\n          id: index,\n          location,\n          infectedDay: -1,\n          isCured: false,\n          mobility: 'FREE',\n        };\n      });\n      return people;\n    };\n\n    function generateAllPositions() {\n      let positionList = [];\n      for (let x = 0; x < gridSize; x++) {\n        for (let y = 0; y < gridSize; y++) {\n          positionList.push({ x, y });\n        }\n      }\n      return positionList;\n    }\n\n    const initialPeople = generateInitialPeople();\n    const indexToInfect = Math.floor(Math.random() * initialPeople.length);\n    initialPeople[indexToInfect].infectedDay = 0;\n    return { ...initialState, people: initialPeople };\n  }\n\n  const [state, dispatch] = useReducer(reducer, initialState, init);\n  const { day, people, historicalInfectedCount, gridSize, boardSize, peopleDensity } = state;\n\n  const cellSize = boardSize / gridSize;\n  const gameMetrics = { gridSize, boardSize, peopleDensity };\n\n  const infectedPeopleCount = getInfectedPeopleCount(people);\n  const curedPeopleCount = people.filter((person) => person.isCured).length;\n  const totalPeopleCount = people.length || 100;\n\n  return (\n    <GameGrid>\n      <GameBoard\n        {...gameMetrics}\n        dispatch={dispatch}\n        people={people}\n        day={day}\n        cellSize={cellSize}\n      />\n      <p>Infected: {infectedPeopleCount}</p>\n      <p>Recovered: {curedPeopleCount}</p>\n      <Graph\n        day={day}\n        historicalInfectedCount={historicalInfectedCount}\n        totalPeopleCount={totalPeopleCount}\n      />\n    </GameGrid>\n  );\n}\n\nconst GameGrid = styled.main`\n  background-color: #454545;\n  color: rgba(255, 255, 255, 0.8);\n`;\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// export const GameContext = createContext(initialState);\n\n// const Store = ({ children }) => {\n//   const [state, dispatch] = useReducer(Reducer, initialState);\n//   return <GameContext.Provider value={[state, dispatch]}>{children}</GameContext.Provider>;\n// };\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}