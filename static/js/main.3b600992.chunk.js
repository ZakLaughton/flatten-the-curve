(this["webpackJsonpflatten-the-curve"]=this["webpackJsonpflatten-the-curve"]||[]).push([[0],{149:function(e,t,n){e.exports=n(262)},154:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(132),a=n.n(i),c=(n(154),n(34)),u=n(146),l=n(35),d=n(145);var f=function(e){var t=e.gridSize,n=e.personData,o=e.dispatch,i=e.day,a=n.id,c=n.infectedDay,u=n.isCured,l=n.location,f=!u&&c>=0&&i-c>=5,s=100/t,p={height:"".concat(s,"%"),width:"".concat(s,"%"),backgroundColor:u?"#57c1ff":f?"#448844":"white",borderRadius:"50%",position:"absolute",left:"".concat(s*l.x,"%"),bottom:"".concat(s*l.y,"%"),border:"1px solid black",boxSizing:"border-box"},y={height:"".concat(s,"%"),width:"".concat(s,"%"),position:"absolute",left:"".concat(s*l.x,"%"),bottom:"".concat(s*l.y,"%"),border:"3px dashed #595959",boxSizing:"border-box"},h={height:"".concat(s,"%"),width:"".concat(s,"%"),position:"absolute",left:"".concat(s*l.x,"%"),bottom:"".concat(s*l.y,"%"),border:"3px ridge #4c0000",boxSizing:"border-box"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.span,{positionTransition:{duration:.4},style:p,onClick:function(){o({type:"UPDATE_PERSON_MOBILITY",payload:{id:a,mobility:f?"QUARANTINED":"SOCIALLY_DISTANCED"}}),o({type:"INCREMENT_DAY"})}}),"SOCIALLY_DISTANCED"===n.mobility&&r.a.createElement("div",{style:y}),"QUARANTINED"===n.mobility&&r.a.createElement("div",{style:h}))};function s(){var e=Object(c.a)(["\n  width: 100vw;\n  height: 100vw;\n  max-width: ",";\n  max-height: ",";\n  background-color: #b7b7b7;\n  position: relative;\n  margin: auto;\n"]);return s=function(){return e},e}var p=l.a.div(s(),(function(e){return"".concat(e.boardSize,"px")}),(function(e){return"".concat(e.boardSize,"px")})),y=function(e){var t=e.boardSize,n=e.gridSize,o=e.people,i=e.dispatch,a=e.day;return r.a.createElement(p,{boardSize:t,onContextMenu:function(e){e.preventDefault(),i({type:"INCREMENT_DAY"})}},o.map((function(e,o){return r.a.createElement(f,{personData:e,key:o,gridSize:n,dispatch:i,day:a,boardSize:t})})))},h=n(270),m=n(268),b=function(e){var t=e.historicalInfectedCount,n=e.totalPeopleCount;return r.a.createElement(h.a,null,r.a.createElement(m.a,{interpolation:"cardinal",data:t,x:"day",y:"count",animate:{duration:300},style:{data:{fill:"rgba(255, 0, 0, 0.6)"}},domain:{y:[0,n]}}))};function v(e){return e.filter((function(e){return!e.isCured&&e.infectedDay>=0})).length}var E=n(73),g=n(52);function S(e,t){var n=t.type,o=t.payload;switch(n){case"INCREMENT_DAY":var r=e.day+1;e.people.reduce((function(t,n,o){if(["SOCIALLY_DISTANCED","QUARANTINED"].includes(n.mobility))return t;var r=function(e,t){var n=C(e,t);return n[Math.floor(Math.random()*n.length)].coordinates}(n.location,e.gridSize);return t.some((function(e){return e.location.x===r.x&&e.location.y===r.y}))?t[o]=n:t[o]=Object(g.a)({},n,{location:r}),t}),e.people);var i=function(){var t=Object(E.a)(e.people),n=t.filter((function(t){return-1!==t.infectedDay&&!t.isCured&&e.day-t.infectedDay>19})).map((function(e){return e.id}));t=t.map((function(e){return n.includes(e.id)&&(e.isCured=!0),e}));var o=e.people.filter((function(e){return e.infectedDay>=0&&!e.isCured&&"QUARANTINED"!==e.mobility})).map((function(e){return C(e.location).filter((function(e){return["N","E","S","W"].includes(e.direction)})).map((function(e){return e.coordinates}))}));return o=o.flat(),e.people.map((function(t){if(-1===t.infectedDay&&o.some((function(e){return t.location.x===e.x&&t.location.y===e.y}))){var n="SOCIALLY_DISTANCED"===t.mobility?.5:1;Math.random()<=n&&(t.infectedDay=e.day)}return t}))}(),a=v(i),c=a/e.people.length*100;return Object(g.a)({},e,{day:r,people:i,historicalInfectedCount:[].concat(Object(E.a)(e.historicalInfectedCount),[{day:r,count:a}]),topOfTheCurve:c>e.topOfTheCurve?c:e.topOfTheCurve});case"UPDATE_PERSON_MOBILITY":var u=Object(E.a)(e.people),l=u.findIndex((function(e){return e.id===o.id}));return u[l].mobility=o.mobility,Object(g.a)({},e,{people:u});case"RESTART":return x(O);default:return e}}function x(e){console.log("INIT>>>");var t=e.gridSize,n=e.peopleDensity,o=Math.floor(t*t*n)||4;var r=function(e){for(var t,n,o=e.length;o;t=parseInt(Math.random()*o),n=e[--o],e[o]=e[t],e[t]=n);return e}(function(){for(var e=[],n=0;n<t;n++)for(var o=0;o<t;o++)e.push({x:n,y:o});return e}()).slice(0,o).map((function(e,t){return{id:t,location:e,infectedDay:-1,isCured:!1,mobility:"FREE"}}));return r[Math.floor(Math.random()*r.length)].infectedDay=0,Object(g.a)({},e,{people:r})}function C(e,t){var n=e.x,o=e.y,r=[{direction:"N",coordinates:{x:n+0,y:o+1}},{direction:"NE",coordinates:{x:n+1,y:o+1}},{direction:"E",coordinates:{x:n+1,y:o+0}},{direction:"SE",coordinates:{x:n+1,y:o-1}},{direction:"S",coordinates:{x:n+0,y:o-1}},{direction:"SW",coordinates:{x:n-1,y:o-1}},{direction:"W",coordinates:{x:n-1,y:o+0}},{direction:"NW",coordinates:{x:n-1,y:o+1}}];return function(e){return 0===e.x}(e)&&(r=r.filter((function(e){return!["NW","W","SW"].includes(e.direction)}))),function(e){return 0===e.y}(e)&&(r=r.filter((function(e){return!["SW","S","SE"].includes(e.direction)}))),function(e){return e.x===t-1}(e)&&(r=r.filter((function(e){return!["SE","E","NE"].includes(e.direction)}))),function(e){return e.y===t-1}(e)&&(r=r.filter((function(e){return!["NE","N","NW"].includes(e.direction)}))),r}n(261);var D=n(95);function w(){var e=Object(c.a)(["\n  width: 200px;\n  height: 200px;\n  margin: auto;\n"]);return w=function(){return e},e}function N(){var e=Object(c.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: space-evenly;\n  font-size: 2rem;\n  font-weight: 500;\n"]);return N=function(){return e},e}function z(){var e=Object(c.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: space-evenly;\n  font-size: 1.2rem;\n  flex-wrap: wrap;\n"]);return z=function(){return e},e}function I(){var e=Object(c.a)(["\n  color: rgba(255, 255, 255, 0.8);\n  width: 100vw;\n  height: 100vh;\n  max-width: ",";\n  margin: auto;\n"]);return I=function(){return e},e}var O={day:0,people:[],historicalInfectedCount:[{day:0,count:0}],gridSize:25,boardSize:700,peopleDensity:.25,topOfTheCurve:0};var T=l.a.main(I(),(function(e){return"".concat(e.boardSize,"px")})),A=l.a.div(z()),R=l.a.div(N()),j=l.a.div(w()),M=function(){Object(o.useEffect)((function(){-1!==document.location.hostname.search("zaklaughton.dev")&&(D.a.initialize("UA-67511792-5"),D.a.pageview("/"))}),[]);var e=Object(o.useReducer)(S,O,x),t=Object(u.a)(e,2),n=t[0],i=t[1],a=n.day,c=n.people,l=n.historicalInfectedCount,d=n.gridSize,f=n.boardSize,s=n.peopleDensity,p=n.topOfTheCurve,h={gridSize:d,boardSize:f,peopleDensity:s},m=v(c),E=c.filter((function(e){var t=e.isCured,n=e.infectedDay;return!t&&n>=0&&a-n>=5})).length,g=c.length,C=c.filter((function(e){return e.isCured})).length;return r.a.createElement(T,{boardSize:f},r.a.createElement("h1",{style:{fontSize:"1.3rem",textAlign:"center"}},"FLATTEN THE CURVE (beta) \u2013 See how low you can keep the curve!"),r.a.createElement("p",{style:{fontSize:"1.3rem",textAlign:"center"}},"One person starts infected. Symptoms show on day 5."),r.a.createElement("p",{style:{fontSize:"1.3rem",textAlign:"center"}},"Click or tap people to social distance (won't move, lower chance of infection). Click or tap people with symptoms to quarantine (can't move, no chance of infecting others)."),r.a.createElement(R,null,"Top of the curve: ",Math.floor(p),"%"),r.a.createElement(y,Object.assign({},h,{dispatch:i,people:c,day:a,gridSize:d,boardSize:f})),r.a.createElement(A,null,r.a.createElement("div",null,r.a.createElement("span",{style:{color:"rgba(255, 0, 0, 0.8)"}},m)," infected (",r.a.createElement("span",{style:{color:"#448844"}},E)," ",E>1||0===E?"have":"has"," symptoms)"),r.a.createElement("div",null,"Recovered: ",r.a.createElement("span",{style:{color:"#57c1ff"}},C)),r.a.createElement("button",{onClick:function(){i({type:"RESTART"})}},"Restart")),r.a.createElement(j,null,r.a.createElement(b,{historicalInfectedCount:l,totalPeopleCount:g})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[149,1,2]]]);
//# sourceMappingURL=main.3b600992.chunk.js.map