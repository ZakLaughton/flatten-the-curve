(this["webpackJsonpflatten-the-curve"]=this["webpackJsonpflatten-the-curve"]||[]).push([[0],{118:function(e,t,n){e.exports=n(231)},123:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o),r=n(105),a=n.n(r),c=(n(123),n(16)),u=n(115),l=n(17),d=n(31);var f=function(e){var t=e.gridSize,n=e.personData,o=e.dispatch,r=e.day,a=n.id,c=n.infectedDay,u=n.isCured,l=n.location,f=!u&&c>=0&&r-c>=5,s=100/t,p={height:"".concat(s,"%"),width:"".concat(s,"%"),backgroundColor:u?"#57c1ff":f?"#448844":"white",borderRadius:"50%",position:"absolute",left:"".concat(s*l.x,"%"),bottom:"".concat(s*l.y,"%"),border:"1px solid black",boxSizing:"border-box",zIndex:5},h={height:"".concat(s,"%"),width:"".concat(s,"%"),left:"".concat(s*l.x,"%"),bottom:"".concat(s*l.y,"%"),borderRadius:"50%",content:"",position:"absolute",zIndex:4,boxSizing:"border-box",boxShadow:"#0000009c 4px 3px 6px 0px"},y={height:"".concat(s,"%"),width:"".concat(s,"%"),position:"absolute",left:"".concat(s*l.x,"%"),bottom:"".concat(s*l.y,"%"),border:"3px dashed #595959",boxSizing:"border-box",zIndex:10},m={height:"".concat(s,"%"),width:"".concat(s,"%"),position:"absolute",left:"".concat(s*l.x,"%"),bottom:"".concat(s*l.y,"%"),border:"3px ridge #4c0000",boxSizing:"border-box",zIndex:10};return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a.span,{positionTransition:{duration:.4},style:p,onClick:function(){o({type:"UPDATE_PERSON_MOBILITY",payload:{id:a,mobility:f?"QUARANTINED":"SOCIALLY_DISTANCED"}}),o({type:"INCREMENT_DAY"})}}),"SOCIALLY_DISTANCED"===n.mobility&&i.a.createElement(d.a.div,{positionTransition:{duration:.4},style:y}),"QUARANTINED"===n.mobility&&i.a.createElement(d.a.div,{positionTransition:{duration:.4},style:m}),i.a.createElement(d.a.div,{positionTransition:{duration:.4},style:h}))};function s(){var e=Object(c.a)(["\n  width: 100vw;\n  height: 100vw;\n  max-width: ",";\n  max-height: ",";\n  background-color: #b7b7b7;\n  position: relative;\n  margin: auto;\n"]);return s=function(){return e},e}var p=l.a.div(s(),(function(e){return"".concat(e.boardSize,"px")}),(function(e){return"".concat(e.boardSize,"px")})),h=function(e){var t=e.boardSize,n=e.gridSize,o=e.people,r=e.dispatch,a=e.day,c=e.children;return i.a.createElement(p,{boardSize:t,onContextMenu:function(e){e.preventDefault(),r({type:"INCREMENT_DAY"})}},o.map((function(e,o){return i.a.createElement(f,{personData:e,key:o,gridSize:n,dispatch:r,day:a,boardSize:t})})),c)},y=n(234);function m(){var e=Object(c.a)(["\n  height: 100%;\n  width: 100%;\n"]);return m=function(){return e},e}var b=l.a.div(m()),v=function(e){var t=e.historicalInfectedCount,n=e.totalPeopleCount;return i.a.createElement(b,null,i.a.createElement(y.a,{interpolation:"cardinal",data:t,height:700,width:700,x:"day",y:"count",animate:{duration:300},style:{data:{fill:"rgba(255, 0, 0, 0.6)"}},domain:{y:[0,n]},padding:0}))};function E(e){return e.filter((function(e){return!e.isCured&&e.infectedDay>=0})).length}var x=n(51),g=n(32);function S(e,t){var n=t.type,o=t.payload;switch(n){case"INCREMENT_DAY":var i=e.day+1;e.people.reduce((function(t,n,o){if(["SOCIALLY_DISTANCED","QUARANTINED"].includes(n.mobility))return t;var i=function(e,t){var n=w(e,t);return n[Math.floor(Math.random()*n.length)].coordinates}(n.location,e.gridSize);return t.some((function(e){return e.location.x===i.x&&e.location.y===i.y}))?t[o]=n:t[o]=Object(g.a)({},n,{location:i}),t}),e.people);var r=function(){var t=Object(x.a)(e.people),n=t.filter((function(t){return-1!==t.infectedDay&&!t.isCured&&e.day-t.infectedDay>19})).map((function(e){return e.id}));t=t.map((function(e){return n.includes(e.id)&&(e.isCured=!0),e}));var o=e.people.filter((function(e){return e.infectedDay>=0&&!e.isCured&&"QUARANTINED"!==e.mobility})).map((function(e){return w(e.location).filter((function(e){return["N","E","S","W"].includes(e.direction)})).map((function(e){return e.coordinates}))}));return o=o.flat(),e.people.map((function(t){if(-1===t.infectedDay&&o.some((function(e){return t.location.x===e.x&&t.location.y===e.y}))){var n="SOCIALLY_DISTANCED"===t.mobility?.5:1;Math.random()<=n&&(t.infectedDay=e.day)}return t}))}(),a=E(r),c=a/e.people.length*100;return r=r.map((function(e){var t=e.isCured,n=e.infectedDay;return!t&&n>=0&&i-n>=5&&(e.mobility="QUARANTINED"),e})),Object(g.a)({},e,{day:i,people:r,historicalInfectedCount:[].concat(Object(x.a)(e.historicalInfectedCount),[{day:i,count:a}]),topOfTheCurve:c>e.topOfTheCurve?c:e.topOfTheCurve});case"UPDATE_PERSON_MOBILITY":var u=Object(x.a)(e.people),l=u.findIndex((function(e){return e.id===o.id}));return u[l].mobility=o.mobility,Object(g.a)({},e,{people:u});case"RESTART":return C(N);default:return e}}function C(e){console.log("INIT>>>");var t=e.gridSize,n=e.peopleDensity,o=Math.floor(t*t*n)||4;var i=function(e){for(var t,n,o=e.length;o;t=parseInt(Math.random()*o),n=e[--o],e[o]=e[t],e[t]=n);return e}(function(){for(var e=[],n=0;n<t;n++)for(var o=0;o<t;o++)e.push({x:n,y:o});return e}()).slice(0,o).map((function(e,t){return{id:t,location:e,infectedDay:-1,isCured:!1,mobility:"FREE"}}));return i[Math.floor(Math.random()*i.length)].infectedDay=0,Object(g.a)({},e,{people:i})}function w(e,t){var n=e.x,o=e.y,i=[{direction:"N",coordinates:{x:n+0,y:o+1}},{direction:"NE",coordinates:{x:n+1,y:o+1}},{direction:"E",coordinates:{x:n+1,y:o+0}},{direction:"SE",coordinates:{x:n+1,y:o-1}},{direction:"S",coordinates:{x:n+0,y:o-1}},{direction:"SW",coordinates:{x:n-1,y:o-1}},{direction:"W",coordinates:{x:n-1,y:o+0}},{direction:"NW",coordinates:{x:n-1,y:o+1}}];return function(e){return 0===e.x}(e)&&(i=i.filter((function(e){return!["NW","W","SW"].includes(e.direction)}))),function(e){return 0===e.y}(e)&&(i=i.filter((function(e){return!["SW","S","SE"].includes(e.direction)}))),function(e){return e.x===t-1}(e)&&(i=i.filter((function(e){return!["SE","E","NE"].includes(e.direction)}))),function(e){return e.y===t-1}(e)&&(i=i.filter((function(e){return!["NE","N","NW"].includes(e.direction)}))),i}n(230);var D=n(70);function z(){var e=Object(c.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: space-evenly;\n  font-size: 2rem;\n  font-weight: 500;\n"]);return z=function(){return e},e}function I(){var e=Object(c.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: space-evenly;\n  font-size: 1.2rem;\n  flex-wrap: wrap;\n"]);return I=function(){return e},e}function T(){var e=Object(c.a)(["\n  color: rgba(255, 255, 255, 0.8);\n  width: 100vw;\n  height: 100vh;\n  max-width: ",";\n  margin: auto;\n"]);return T=function(){return e},e}var N={day:0,people:[],historicalInfectedCount:[{day:0,count:0}],gridSize:25,boardSize:700,peopleDensity:.25,topOfTheCurve:0};var A=l.a.main(T(),(function(e){return"".concat(e.boardSize,"px")})),O=l.a.div(I()),R=l.a.div(z()),j=function(){Object(o.useEffect)((function(){-1!==document.location.hostname.search("zaklaughton.dev")&&(D.a.initialize("UA-67511792-5"),D.a.pageview("/"))}),[]);var e=Object(o.useReducer)(S,N,C),t=Object(u.a)(e,2),n=t[0],r=t[1],a=n.day,c=n.people,l=n.historicalInfectedCount,d=n.gridSize,f=n.boardSize,s=n.peopleDensity,p=n.topOfTheCurve,y={gridSize:d,boardSize:f,peopleDensity:s},m=E(c),b=c.filter((function(e){var t=e.isCured,n=e.infectedDay;return!t&&n>=0&&a-n>=5})).length,x=c.length,g=c.filter((function(e){return e.isCured})).length;return i.a.createElement(A,{boardSize:f},i.a.createElement("h1",{style:{fontSize:"1.3rem",textAlign:"center"}},"FLATTEN THE CURVE (beta) \u2013 See how low you can keep the curve!"),i.a.createElement("p",{style:{fontSize:"1.3rem",textAlign:"center"}},"One person starts infected. Symptoms show on day 5."),i.a.createElement("p",{style:{fontSize:"1.3rem",textAlign:"center"}},"Click or tap people to social distance (won't move, lower chance of infection). Click or tap people with symptoms to quarantine (can't move, no chance of infecting others)."),i.a.createElement(R,null,"Top of the curve: ",Math.floor(p),"%"),i.a.createElement(h,Object.assign({},y,{dispatch:r,people:c,day:a,gridSize:d,boardSize:f}),i.a.createElement(v,{historicalInfectedCount:l,totalPeopleCount:x})),i.a.createElement(O,null,i.a.createElement("div",null,i.a.createElement("span",{style:{color:"rgba(255, 0, 0, 0.8)"}},m)," infected (",i.a.createElement("span",{style:{color:"#448844"}},b)," ",b>1||0===b?"have":"has"," symptoms)"),i.a.createElement("div",null,"Recovered: ",i.a.createElement("span",{style:{color:"#57c1ff"}},g)),i.a.createElement("button",{onClick:function(){r({type:"RESTART"})}},"Reset")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[118,1,2]]]);
//# sourceMappingURL=main.ab2aa4b7.chunk.js.map