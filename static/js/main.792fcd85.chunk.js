(this["webpackJsonpflatten-the-curve"]=this["webpackJsonpflatten-the-curve"]||[]).push([[0],{45:function(e,t,n){e.exports=n(75)},50:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),a=n(36),i=n.n(a),c=(n(50),n(5)),l=n(42),u=n(9),d=n(6),f=n(41);var s=function(e){var t=e.gridSize,n=e.personData,o=e.dispatch,a=e.day,i=n.id,c=n.infectedDay,l=n.isCured,u=n.location,d=!l&&c>=0&&a-c>=5,s={height:"".concat(100/t,"%"),width:"".concat(100/t,"%"),backgroundColor:l?"#57c1ff":d?"#448844":"white",borderRadius:"50%",position:"absolute",left:"".concat(100/t*u.x,"%"),bottom:"".concat(100/t*u.y,"%"),border:"1px solid black",boxSizing:"border-box"},p={height:"".concat(100/t,"%"),width:"".concat(100/t,"%"),position:"absolute",left:"".concat(100/t*u.x,"%"),bottom:"".concat(100/t*u.y,"%"),border:"3px dashed #595959",boxSizing:"border-box"},m={height:"".concat(100/t,"%"),width:"".concat(100/t,"%"),position:"absolute",left:"".concat(100/t*u.x,"%"),bottom:"".concat(100/t*u.y,"%"),border:"3px solid black",boxSizing:"border-box"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a.span,{positionTransition:{duration:.4},style:s,onClick:function(){o({type:"UPDATE_PERSON_MOBILITY",payload:{id:i,mobility:d?"QUARANTINED":"SOCIALLY_DISTANCED"}}),o({type:"INCREMENT_DAY"})}}),"SOCIALLY_DISTANCED"===n.mobility&&r.a.createElement("div",{style:p}),"QUARANTINED"===n.mobility&&r.a.createElement("div",{style:m}))};function p(){var e=Object(c.a)(["\n  width: 100vw;\n  height: 100vw;\n  max-width: ",";\n  max-height: ",";\n  background-color: #b7b7b7;\n  position: relative;\n  margin: auto;\n"]);return p=function(){return e},e}var m=d.a.div(p(),(function(e){return"".concat(e.boardSize,"px")}),(function(e){return"".concat(e.boardSize,"px")})),y=function(e){var t=e.boardSize,n=e.gridSize,o=e.people,a=e.dispatch,i=e.day;return r.a.createElement(m,{boardSize:t,onContextMenu:function(e){e.preventDefault(),a({type:"INCREMENT_DAY"})}},o.map((function(e,o){return r.a.createElement(s,{personData:e,key:o,gridSize:n,dispatch:a,day:i,boardSize:t})})))},h=n(7),E=function(e){var t=e.historicalInfectedCount,n=e.totalPeopleCount,o=e.day,a=t.map((function(e){return{x:e.day,y:e.count}})),i=[0,n],c=[0,o],l=function(){for(var e=[0],t=0;t<o;t++)t%5===0&&e.push(t);return e}(),u=function(){for(var e=[],t=0,o=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1];t<o.length;t++){var r=o[t];e.push(r*n)}return e}();return r.a.createElement(h.b,{animation:!0,stackBy:"y",yDomain:i,xDomain:c,curve:"curveCardinal"},r.a.createElement(h.d,null),r.a.createElement(h.c,null),r.a.createElement(h.e,{animation:!0,attr:"x",attrAxis:"y",orientation:"bottom",tickValues:l,tickFormat:function(e){return e},title:"days",position:"end"}),r.a.createElement(h.f,{title:"% infected",position:"end",animation:!0,attr:"y",attrAxis:"x",orientation:"left",tickValues:u,tickFormat:function(e){return e/n*100}}),r.a.createElement(h.a,{animation:!0,data:a,opacity:.5,style:{},color:"red"}))};function v(e){return e.filter((function(e){return!e.isCured&&e.infectedDay>=0})).length}var b=n(17);function S(e,t){var n=t.type,o=t.payload;switch(n){case"INCREMENT_DAY":var r=e.day+1;e.people.reduce((function(t,n,o){if(["SOCIALLY_DISTANCED","QUARANTINED"].includes(n.mobility))return t;var r=function(e,t){var n=x(e,t);return n[Math.floor(Math.random()*n.length)].coordinates}(n.location,e.gridSize);return t.some((function(e){return e.location.x===r.x&&e.location.y===r.y}))?t[o]=n:t[o]=Object(u.a)({},n,{location:r}),t}),e.people);var a=function(){var t=Object(b.a)(e.people),n=t.filter((function(t){return-1!==t.infectedDay&&!t.isCured&&e.day-t.infectedDay>19})).map((function(e){return e.id}));t=t.map((function(e){return n.includes(e.id)&&(e.isCured=!0),e}));var o=e.people.filter((function(e){return e.infectedDay>=0&&!e.isCured&&"QUARANTINED"!==e.mobility})).map((function(e){return x(e.location).filter((function(e){return["N","E","S","W"].includes(e.direction)})).map((function(e){return e.coordinates}))}));return o=o.flat(),e.people.map((function(t){if(-1===t.infectedDay&&o.some((function(e){return t.location.x===e.x&&t.location.y===e.y}))){var n="SOCIALLY_DISTANCED"===t.mobility?.5:1;Math.random()<=n&&(t.infectedDay=e.day)}return t}))}(),i=v(a),c=i/e.people.length*100;return Object(u.a)({},e,{day:r,people:a,historicalInfectedCount:[].concat(Object(b.a)(e.historicalInfectedCount),[{day:r,count:i}]),topOfTheCurve:c>e.topOfTheCurve?c:e.topOfTheCurve});case"UPDATE_PERSON_MOBILITY":var l=Object(b.a)(e.people),d=l.findIndex((function(e){return e.id===o.id}));return l[d].mobility=o.mobility,Object(u.a)({},e,{people:l});default:return e}}function x(e,t){var n=e.x,o=e.y,r=[{direction:"N",coordinates:{x:n+0,y:o+1}},{direction:"NE",coordinates:{x:n+1,y:o+1}},{direction:"E",coordinates:{x:n+1,y:o+0}},{direction:"SE",coordinates:{x:n+1,y:o-1}},{direction:"S",coordinates:{x:n+0,y:o-1}},{direction:"SW",coordinates:{x:n-1,y:o-1}},{direction:"W",coordinates:{x:n-1,y:o+0}},{direction:"NW",coordinates:{x:n-1,y:o+1}}];return function(e){return 0===e.x}(e)&&(r=r.filter((function(e){return!["NW","W","SW"].includes(e.direction)}))),function(e){return 0===e.y}(e)&&(r=r.filter((function(e){return!["SW","S","SE"].includes(e.direction)}))),function(e){return e.x===t-1}(e)&&(r=r.filter((function(e){return!["SE","E","NE"].includes(e.direction)}))),function(e){return e.y===t-1}(e)&&(r=r.filter((function(e){return!["NE","N","NW"].includes(e.direction)}))),r}n(74);function g(){var e=Object(c.a)(["\n  width: 200px;\n  height: 200px;\n"]);return g=function(){return e},e}function C(){var e=Object(c.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: space-evenly;\n  font-size: 4rem;\n  font-weight: 500;\n"]);return C=function(){return e},e}function D(){var e=Object(c.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: space-evenly;\n  font-size: 2rem;\n"]);return D=function(){return e},e}function N(){var e=Object(c.a)(["\n  color: rgba(255, 255, 255, 0.8);\n  width: 100vw;\n  height: 100vh;\n  max-width: ",";\n  margin: auto;\n"]);return N=function(){return e},e}var I=d.a.main(N(),(function(e){return"".concat(e.boardSize,"px")})),O=d.a.div(D()),w=d.a.div(C()),z=d.a.div(g()),T=function(){var e=Object(o.useReducer)(S,{day:0,people:[],historicalInfectedCount:[{day:0,count:0}],gridSize:25,boardSize:700,peopleDensity:.2,topOfTheCurve:0},(function(e){var t=e.gridSize,n=e.peopleDensity,o=Math.floor(t*t*n)||4,r=function(e){for(var t,n,o=e.length;o;t=parseInt(Math.random()*o),n=e[--o],e[o]=e[t],e[t]=n);return e}(function(){for(var e=[],n=0;n<t;n++)for(var o=0;o<t;o++)e.push({x:n,y:o});return e}()).slice(0,o).map((function(e,t){return{id:t,location:e,infectedDay:-1,isCured:!1,mobility:"FREE"}}));return r[Math.floor(Math.random()*r.length)].infectedDay=0,Object(u.a)({},e,{people:r})})),t=Object(l.a)(e,2),n=t[0],a=t[1],i=n.day,c=n.people,d=n.historicalInfectedCount,f=n.gridSize,s=n.boardSize,p=n.peopleDensity,m=n.topOfTheCurve,h={gridSize:f,boardSize:s,peopleDensity:p},b=v(c),x=c.filter((function(e){var t=e.isCured,n=e.infectedDay;return!t&&n>=0&&i-n>=5})).length,g=c.length,C=c.filter((function(e){return e.isCured})).length,D="".concat(Math.floor(b/g*100),"%"),N="".concat(Math.floor(x/g*100),"%"),T="".concat(Math.floor(C/g*100),"%");return r.a.createElement(I,{boardSize:s},r.a.createElement("h1",{style:{fontSize:"1.3rem"}},r.a.createElement("center",null,"FLATTEN THE CURVE (beta) \u2013 See how low you can keep the curve!")),r.a.createElement("p",null,r.a.createElement("center",null,"One person is infected. Symptoms show on day 5. Recovery happens on day 19.")),r.a.createElement("p",null,r.a.createElement("center",null,"Select people to social distance (can't move, lower chance of infection).")),r.a.createElement("p",null,r.a.createElement("center",null,"Select symptomatic people to quarantine (can't move, no chance of infecting others).")),r.a.createElement("p",null,r.a.createElement("center",null,"Refresh the page to restart.")),r.a.createElement(y,Object.assign({},h,{dispatch:a,people:c,day:i,gridSize:f,boardSize:s})),r.a.createElement(O,null,r.a.createElement("div",null,"Infected: ",r.a.createElement("span",{style:{color:"red"}},D)),r.a.createElement("div",null,"Symptomatic: ",r.a.createElement("span",{style:{color:"#448844"}},N)),r.a.createElement("div",null,"Recovered: ",r.a.createElement("span",{style:{color:"#57c1ff"}},T))),r.a.createElement(w,null,"Top of the curve: ",Math.floor(m),"%"),r.a.createElement(z,null,r.a.createElement(E,{day:i,historicalInfectedCount:d,totalPeopleCount:g})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.792fcd85.chunk.js.map