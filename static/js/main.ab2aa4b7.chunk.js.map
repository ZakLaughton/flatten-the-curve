{"version":3,"sources":["components/Person.js","components/GameBoard.js","components/Graph.js","utils/utils.js","state/gameReducer.js","App.js","serviceWorker.js","index.js"],"names":["Person","gridSize","personData","dispatch","day","id","infectedDay","isCured","location","isSymptomatic","cellSizeInPercent","personStyle","height","width","backgroundColor","borderRadius","position","left","x","bottom","y","border","boxSizing","zIndex","personShadow","content","boxShadow","sociallyDistancedSquareStyle","quarantinedSquareStyle","span","positionTransition","duration","style","onClick","type","payload","mobility","div","Board","styled","props","boardSize","GameBoard","people","children","onContextMenu","e","preventDefault","map","person","index","key","GraphContainer","Graph","historicalInfectedCount","totalPeopleCount","interpolation","data","animate","fill","domain","padding","getInfectedPeopleCount","filter","length","reducer","state","newDayNumber","reduce","newPeople","includes","newLocation","possibleMoves","getSurroundingCells","Math","floor","random","coordinates","calculateMove","some","movedInfectedPeople","peopleCopy","peopleToRecover","infectionZones","direction","surroundingCell","flat","infectionZone","chanceOfGettingInfected","infect","newInfectedPeopleCount","infectedPercentage","count","topOfTheCurve","personIndex","findIndex","init","initialState","console","log","peopleDensity","numberOfPeople","initialPeople","arrayToShuffle","j","i","parseInt","shuffleArray","positionList","push","generateAllPositions","slice","surroundingCells","isOnLeftEdge","move","isOnBottomEdge","isOnRightEdge","isOnTopEdge","GameGrid","main","Stats","TopOfTheCurve","App","useEffect","document","hostname","search","ReactGA","initialize","pageview","useReducer","gameMetrics","infectedPeopleCount","symptomaticCount","curedPeopleCount","fontSize","textAlign","color","Boolean","window","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.ab2aa4b7.chunk.js","sourcesContent":["import React from \"react\";\nimport { motion } from \"framer-motion\";\n\nfunction Person({ gridSize, personData, dispatch, day }) {\n  const { id, infectedDay, isCured, location } = personData;\n  const isSymptomatic = !isCured && infectedDay >= 0 && day - infectedDay >= 5;\n  const handleClick = () => {\n    const newMobility = isSymptomatic ? \"QUARANTINED\" : \"SOCIALLY_DISTANCED\";\n    dispatch({ type: \"UPDATE_PERSON_MOBILITY\", payload: { id, mobility: newMobility } });\n    dispatch({ type: \"INCREMENT_DAY\" });\n  };\n\n  const cellSizeInPercent = 100 / gridSize;\n\n  // ! styled-components slow this movement to a crawl. Don't use them here\n\n  const personStyle = {\n    height: `${cellSizeInPercent}%`,\n    width: `${cellSizeInPercent}%`,\n    backgroundColor: isCured ? \"#57c1ff\" : isSymptomatic ? \"#448844\" : \"white\",\n    borderRadius: `50%`,\n    position: `absolute`,\n    left: `${cellSizeInPercent * location.x}%`,\n    bottom: `${cellSizeInPercent * location.y}%`,\n    border: \"1px solid black\",\n    // Use to reveal all infected for debugging:\n    // border: infectedDay >= 0 ? '3px solid green' : '1px solid black',\n    boxSizing: `border-box`,\n    zIndex: 5,\n  };\n\n  const personShadow = {\n    height: `${cellSizeInPercent}%`,\n    width: `${cellSizeInPercent}%`,\n    left: `${cellSizeInPercent * location.x}%`,\n    bottom: `${cellSizeInPercent * location.y}%`,\n    borderRadius: `50%`,\n    content: \"\",\n    position: `absolute`,\n    zIndex: 4,\n    boxSizing: `border-box`,\n    boxShadow: `#0000009c 4px 3px 6px 0px`,\n  };\n\n  const sociallyDistancedSquareStyle = {\n    height: `${cellSizeInPercent}%`,\n    width: `${cellSizeInPercent}%`,\n    position: `absolute`,\n    left: `${cellSizeInPercent * location.x}%`,\n    bottom: `${cellSizeInPercent * location.y}%`,\n    border: `3px dashed #595959`,\n    boxSizing: `border-box`,\n    zIndex: 10,\n  };\n\n  const quarantinedSquareStyle = {\n    height: `${cellSizeInPercent}%`,\n    width: `${cellSizeInPercent}%`,\n    position: `absolute`,\n    left: `${cellSizeInPercent * location.x}%`,\n    bottom: `${cellSizeInPercent * location.y}%`,\n    border: `3px ridge #4c0000`,\n    boxSizing: `border-box`,\n    zIndex: 10,\n  };\n\n  return (\n    <>\n      <motion.span\n        positionTransition={{ duration: 0.4 }}\n        style={personStyle}\n        onClick={handleClick}\n      />\n      {personData.mobility === \"SOCIALLY_DISTANCED\" && (\n        <motion.div positionTransition={{ duration: 0.4 }} style={sociallyDistancedSquareStyle} />\n      )}\n      {personData.mobility === \"QUARANTINED\" && (\n        <motion.div positionTransition={{ duration: 0.4 }} style={quarantinedSquareStyle} />\n      )}\n      <motion.div positionTransition={{ duration: 0.4 }} style={personShadow} />\n    </>\n  );\n}\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\nimport styled from \"styled-components\";\n\nfunction GameBoard({ boardSize, gridSize, people, dispatch, day, children }) {\n  return (\n    <Board\n      boardSize={boardSize}\n      onContextMenu={(e) => {\n        e.preventDefault();\n        // setInterval(movePeople, 400);\n        dispatch({ type: \"INCREMENT_DAY\" });\n      }}\n    >\n      {people.map((person, index) => (\n        <Person\n          personData={person}\n          key={index}\n          gridSize={gridSize}\n          dispatch={dispatch}\n          day={day}\n          boardSize={boardSize}\n        />\n      ))}\n      {children}\n    </Board>\n  );\n}\n\nconst Board = styled.div`\n  width: 100vw;\n  height: 100vw;\n  max-width: ${(props) => `${props.boardSize}px`};\n  max-height: ${(props) => `${props.boardSize}px`};\n  background-color: #b7b7b7;\n  position: relative;\n  margin: auto;\n`;\n\nexport default GameBoard;\n","import React from \"react\";\nimport { VictoryArea } from \"victory\";\nimport styled from \"styled-components\";\n\nexport const Graph = ({ historicalInfectedCount, totalPeopleCount }) => {\n  return (\n    <GraphContainer>\n      <VictoryArea\n        interpolation='cardinal'\n        data={historicalInfectedCount}\n        height={700}\n        width={700}\n        x='day'\n        y='count'\n        animate={{ duration: 300 }}\n        style={{ data: { fill: `rgba(255, 0, 0, 0.6)` } }}\n        domain={{ y: [0, totalPeopleCount] }}\n        padding={0}\n      />\n    </GraphContainer>\n  );\n};\n\nconst GraphContainer = styled.div`\n  height: 100%;\n  width: 100%;\n`;\n\nexport default Graph;\n","export function shuffleArray(arrayToShuffle) {\n  for (\n    var j, x, i = arrayToShuffle.length;\n    i;\n    j = parseInt(Math.random() * i),\n      x = arrayToShuffle[--i],\n      arrayToShuffle[i] = arrayToShuffle[j],\n      arrayToShuffle[j] = x\n  );\n  return arrayToShuffle;\n}\n\nexport function getInfectedPeopleCount(people) {\n  return people.filter((person) => !person.isCured && person.infectedDay >= 0).length;\n}\n\n// TODO: Make this\n// export function isSymptomatic(person, day) {\n//   return !person.isCured && person.infectedDay >= 0 && day - person.infectedDay >= 5;\n// }\n","import { getInfectedPeopleCount, shuffleArray } from \"../utils/utils\";\nimport { initialState } from \"../App\";\n\nexport default function reducer(state, { type, payload }) {\n  switch (type) {\n    case \"INCREMENT_DAY\":\n      const newDayNumber = state.day + 1;\n      // Move people\n      const movedPeople = state.people.reduce((newPeople, person, index) => {\n        if ([\"SOCIALLY_DISTANCED\", \"QUARANTINED\"].includes(person.mobility)) return newPeople;\n        const newLocation = calculateMove(person.location, state.gridSize);\n\n        if (\n          newPeople.some(\n            (person) => person.location.x === newLocation.x && person.location.y === newLocation.y\n          )\n        ) {\n          newPeople[index] = person;\n        } else {\n          newPeople[index] = { ...person, location: newLocation };\n        }\n\n        return newPeople;\n      }, state.people);\n\n      // Infect\n      function infect() {\n        let peopleCopy = [...state.people];\n        const peopleToRecover = peopleCopy\n          .filter(\n            (person) =>\n              person.infectedDay !== -1 && !person.isCured && state.day - person.infectedDay > 19\n          )\n          .map((person) => person.id);\n        peopleCopy = peopleCopy.map((person) => {\n          if (peopleToRecover.includes(person.id)) person.isCured = true;\n          return person;\n        });\n\n        const contagiousPeople = state.people.filter(\n          (person) =>\n            person.infectedDay >= 0 && !person.isCured && person.mobility !== \"QUARANTINED\"\n        );\n        let infectionZones = contagiousPeople.map((person) => {\n          const neighborLocations = getSurroundingCells(person.location)\n            .filter((location) => [\"N\", \"E\", \"S\", \"W\"].includes(location.direction))\n            .map((surroundingCell) => surroundingCell.coordinates);\n\n          return neighborLocations;\n        });\n        infectionZones = infectionZones.flat();\n        const newlyInfectedPeople = state.people.map((person) => {\n          if (\n            person.infectedDay === -1 &&\n            infectionZones.some(\n              (infectionZone) =>\n                person.location.x === infectionZone.x && person.location.y === infectionZone.y\n            )\n          ) {\n            const chanceOfGettingInfected = person.mobility === \"SOCIALLY_DISTANCED\" ? 0.5 : 1;\n            if (Math.random() <= chanceOfGettingInfected) person.infectedDay = state.day;\n          }\n          return person;\n        });\n\n        return newlyInfectedPeople;\n      }\n      let movedInfectedPeople = infect(movedPeople);\n      const newInfectedPeopleCount = getInfectedPeopleCount(movedInfectedPeople);\n      const infectedPercentage = (newInfectedPeopleCount / state.people.length) * 100;\n\n      // Experimental: auto-quarantine symptomatic people\n      movedInfectedPeople = movedInfectedPeople.map((person) => {\n        const { isCured, infectedDay } = person;\n        if (!isCured && infectedDay >= 0 && newDayNumber - infectedDay >= 5) {\n          person.mobility = \"QUARANTINED\";\n        }\n        return person;\n      });\n\n      return {\n        ...state,\n        day: newDayNumber,\n        people: movedInfectedPeople,\n        historicalInfectedCount: [\n          ...state.historicalInfectedCount,\n          { day: newDayNumber, count: newInfectedPeopleCount },\n        ],\n        topOfTheCurve:\n          infectedPercentage > state.topOfTheCurve ? infectedPercentage : state.topOfTheCurve,\n      };\n\n    case \"UPDATE_PERSON_MOBILITY\":\n      const newPeople = [...state.people];\n      const personIndex = newPeople.findIndex((person) => person.id === payload.id);\n      newPeople[personIndex].mobility = payload.mobility;\n\n      return { ...state, people: newPeople };\n    case \"RESTART\":\n      return init(initialState);\n    default:\n      return state;\n  }\n}\n\nexport function init(initialState) {\n  console.log(\"INIT>>>\");\n  const { gridSize, peopleDensity } = initialState;\n  const numberOfPeople = Math.floor(gridSize * gridSize * peopleDensity) || 4;\n  const generateInitialPeople = () => {\n    const allPositions = generateAllPositions();\n    let shuffledLocations = shuffleArray(allPositions);\n    const people = shuffledLocations.slice(0, numberOfPeople).map((location, index) => {\n      return {\n        id: index,\n        location,\n        infectedDay: -1,\n        isCured: false,\n        mobility: \"FREE\",\n      };\n    });\n    return people;\n  };\n\n  function generateAllPositions() {\n    let positionList = [];\n    for (let x = 0; x < gridSize; x++) {\n      for (let y = 0; y < gridSize; y++) {\n        positionList.push({ x, y });\n      }\n    }\n    return positionList;\n  }\n\n  const initialPeople = generateInitialPeople();\n  const indexToInfect = Math.floor(Math.random() * initialPeople.length);\n  initialPeople[indexToInfect].infectedDay = 0;\n  return { ...initialState, people: initialPeople };\n}\n\nfunction calculateMove(location, gridSize) {\n  const possibleMoves = getSurroundingCells(location, gridSize);\n  const newLocation = possibleMoves[Math.floor(Math.random() * possibleMoves.length)];\n\n  return newLocation.coordinates;\n}\n\nfunction getSurroundingCells(location, gridSize) {\n  const { x, y } = location;\n  let surroundingCells = [\n    { direction: \"N\", coordinates: { x: x + 0, y: y + 1 } },\n    { direction: \"NE\", coordinates: { x: x + 1, y: y + 1 } },\n    { direction: \"E\", coordinates: { x: x + 1, y: y + 0 } },\n    { direction: \"SE\", coordinates: { x: x + 1, y: y - 1 } },\n    { direction: \"S\", coordinates: { x: x + 0, y: y - 1 } },\n    { direction: \"SW\", coordinates: { x: x - 1, y: y - 1 } },\n    { direction: \"W\", coordinates: { x: x - 1, y: y + 0 } },\n    { direction: \"NW\", coordinates: { x: x - 1, y: y + 1 } },\n  ];\n\n  if (isOnLeftEdge(location))\n    surroundingCells = surroundingCells.filter(\n      (move) => ![\"NW\", \"W\", \"SW\"].includes(move.direction)\n    );\n  if (isOnBottomEdge(location))\n    surroundingCells = surroundingCells.filter(\n      (move) => ![\"SW\", \"S\", \"SE\"].includes(move.direction)\n    );\n  if (isOnRightEdge(location))\n    surroundingCells = surroundingCells.filter(\n      (move) => ![\"SE\", \"E\", \"NE\"].includes(move.direction)\n    );\n  if (isOnTopEdge(location))\n    surroundingCells = surroundingCells.filter(\n      (move) => ![\"NE\", \"N\", \"NW\"].includes(move.direction)\n    );\n\n  return surroundingCells;\n\n  function isOnLeftEdge(location) {\n    return location.x === 0;\n  }\n  function isOnBottomEdge(location) {\n    return location.y === 0;\n  }\n  function isOnRightEdge(location) {\n    return location.x === gridSize - 1;\n  }\n  function isOnTopEdge(location) {\n    return location.y === gridSize - 1;\n  }\n}\n","import React, { useReducer, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport GameBoard from \"./components/GameBoard\";\nimport Graph from \"./components/Graph\";\nimport { getInfectedPeopleCount } from \"./utils/utils\";\nimport reducer, { init } from \"./state/gameReducer\";\nimport \"./App.css\";\nimport ReactGA from \"react-ga\";\n\nconst ARRAY_SEARCH_RESULT_NOT_FOUND = -1;\n\nfunction initializeReactGA() {\n  if (document.location.hostname.search(`zaklaughton.dev`) !== ARRAY_SEARCH_RESULT_NOT_FOUND) {\n    ReactGA.initialize(`UA-67511792-5`);\n    ReactGA.pageview(`/`);\n  }\n}\n\nexport const initialState = {\n  day: 0,\n  people: [],\n  historicalInfectedCount: [{ day: 0, count: 0 }],\n  gridSize: 25,\n  boardSize: 700,\n  peopleDensity: 0.25,\n  topOfTheCurve: 0,\n};\n\nfunction App() {\n  useEffect(() => {\n    initializeReactGA();\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, initialState, init);\n  const {\n    day,\n    people,\n    historicalInfectedCount,\n    gridSize,\n    boardSize,\n    peopleDensity,\n    topOfTheCurve,\n  } = state;\n\n  const gameMetrics = { gridSize, boardSize, peopleDensity };\n\n  const infectedPeopleCount = getInfectedPeopleCount(people);\n  const symptomaticCount = people.filter(\n    ({ isCured, infectedDay }) => !isCured && infectedDay >= 0 && day - infectedDay >= 5\n  ).length;\n  const totalPeopleCount = people.length;\n  const curedPeopleCount = people.filter((person) => person.isCured).length;\n\n  return (\n    <GameGrid boardSize={boardSize}>\n      <h1 style={{ fontSize: `1.3rem`, textAlign: `center` }}>\n        FLATTEN THE CURVE (beta) – See how low you can keep the curve!\n      </h1>\n      <p style={{ fontSize: `1.3rem`, textAlign: `center` }}>\n        One person starts infected. Symptoms show on day 5.\n      </p>\n      <p style={{ fontSize: `1.3rem`, textAlign: `center` }}>\n        Click or tap people to social distance (won't move, lower chance of infection). Click or tap\n        people with symptoms to quarantine (can't move, no chance of infecting others).\n      </p>\n      <TopOfTheCurve>Top of the curve: {Math.floor(topOfTheCurve)}%</TopOfTheCurve>\n\n      <GameBoard\n        {...gameMetrics}\n        dispatch={dispatch}\n        people={people}\n        day={day}\n        gridSize={gridSize}\n        boardSize={boardSize}\n      >\n        <Graph\n          historicalInfectedCount={historicalInfectedCount}\n          totalPeopleCount={totalPeopleCount}\n        />\n      </GameBoard>\n      <Stats>\n        <div>\n          <span style={{ color: `rgba(255, 0, 0, 0.8)` }}>{infectedPeopleCount}</span> infected (\n          <span style={{ color: `#448844` }}>{symptomaticCount}</span>{\" \"}\n          {symptomaticCount > 1 || symptomaticCount === 0 ? \"have\" : \"has\"} symptoms)\n        </div>\n        <div>\n          Recovered: <span style={{ color: `#57c1ff` }}>{curedPeopleCount}</span>\n        </div>\n        <button\n          onClick={() => {\n            dispatch({ type: \"RESTART\" });\n          }}\n        >\n          Reset\n        </button>\n      </Stats>\n    </GameGrid>\n  );\n}\n\nconst GameGrid = styled.main`\n  color: rgba(255, 255, 255, 0.8);\n  width: 100vw;\n  height: 100vh;\n  max-width: ${(props) => `${props.boardSize}px`};\n  margin: auto;\n`;\n\nconst Stats = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: space-evenly;\n  font-size: 1.2rem;\n  flex-wrap: wrap;\n`;\n\nconst TopOfTheCurve = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: space-evenly;\n  font-size: 2rem;\n  font-weight: 500;\n`;\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// export const GameContext = createContext(initialState);\n\n// const Store = ({ children }) => {\n//   const [state, dispatch] = useReducer(Reducer, initialState);\n//   return <GameContext.Provider value={[state, dispatch]}>{children}</GameContext.Provider>;\n// };\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}